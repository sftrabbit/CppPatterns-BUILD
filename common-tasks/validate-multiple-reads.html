<!doctype html>
<html>
	<head>
		<title>Validate multiple reads - C++ Samples</title>
		<meta charset="utf-8">
		<meta name="description" content="Ensure that multiple stream reads are successful before using the
extracted values.

">
		<meta name="viewport" content="width=device-width,user-scalable=no">
		<link rel="canonical" href="http://www.cppsamples.com/common-tasks/validate-multiple-reads.html">
		<link rel="icon" sizes="16x16" type="image/vnd.microsoft.icon" href="http://www.cppsamples.com/images/icon-16.ico">
		<link rel="icon" sizes="32x32" type="image/vnd.microsoft.icon" href="http://www.cppsamples.com/images/icon-32.ico">
		<link href="http://fonts.googleapis.com/css?family=Roboto:400italic,100,700italic,700,400|Roboto+Slab|Ubuntu+Mono" rel="stylesheet" type="text/css">
		<link href="http://www.cppsamples.com/css/screen.css" rel="stylesheet" type="text/css">

		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<script async defer src="https://apis.google.com/js/platform.js"></script>

		<meta name="twitter:card" content="summary">
		<meta name="twitter:creator" content="@sftrabbit">
		<meta property="og:title" content="Validate multiple reads - C++ Samples">
		<meta property="og:site_name" content="C++ Samples">
		<meta property="og:url" content="http://www.cppsamples.com/common-tasks/validate-multiple-reads.html">
		<meta property="og:description" content="Ensure that multiple stream reads are successful before using the
extracted values.

">
		<meta property="fb:app_id" content="676162015844286">
	</head>
	<body>
		<header>
			<div class="container">
				<div class="row">
					<div class="column-4">
						<h1><a href="http://www.cppsamples.com/"><span>C++</span>​Samples</a></h1>
						<p>A repository of modern C++ code samples curated by the community.</p>
					</div>
				</div>
			</div>
		</header>
		<main class="container">
			<div class="row disclaimer">
				<div class="column-4">
					<p>C++ Samples was launched on 6th April 2015 and the existing samples are still under review. If you notice any mistakes or would like to contribute additional samples, please leave comments or <a href="https://github.com/sftrabbit/CppSamples-Samples">fork the sample repository</a>.</p>
				</div>
			</div>
			<script>
var selected = false;

function apply_to_lines(lineRefElement, callback) {
	var lineNumStart = parseInt(lineRefElement.dataset.line);
	var lineNumEnd = lineNumStart;
	if (lineRefElement.dataset.lineEnd) {
		var lineNumEnd = parseInt(lineRefElement.dataset.lineEnd);
	}
	for (var i = lineNumStart; i <= lineNumEnd; i++) {
		var lineElement = document.getElementById('line'+i);
		callback(lineElement);
	}
}

function clear_all() {
	var i = 1;
	var lineElement;
	while (lineElement = document.getElementById('line'+i)) {
		lineElement.style.backgroundColor = "transparent";
		i++;
	}
}

document.addEventListener('DOMContentLoaded', function() {
	document.onclick = function(event) {
		clear_all();
	}

	var lineRefElements = document.getElementsByClassName('lineref');
	for (var i = 0; i < lineRefElements.length; i++) {
		lineRefElements[i].onclick = function(event) {
			clear_all();
			apply_to_lines(event.target, function(lineElement) {
				lineElement.style.backgroundColor = "rgb(76, 69, 41)";
			});
			event.stopPropagation();
		}
		lineRefElements[i].onmouseover = function(event) {
			apply_to_lines(event.target, function(lineElement) {
				if (lineElement.style.backgroundColor != "rgb(76, 69, 41)") {
					lineElement.style.backgroundColor = "rgb(69, 69, 69)";
				}
			});
			event.stopPropagation();
		}
		lineRefElements[i].onmouseout = function(event) {
			apply_to_lines(event.target, function(lineElement) {
				if (lineElement.style.backgroundColor != "rgb(76, 69, 41)") {
					lineElement.style.backgroundColor = "transparent";
				}
			});
			event.stopPropagation();
		}
	}
}, false);
			</script>
			<section class="sample">
				<div class="row">
					<div class="column-4">
						<a href="http://www.cppsamples.com/">← Samples</a>
						<h1>Validate multiple reads</h1>
					</div>
				</div>
				<div class="row">
					<div class="column-2">
						<table class="codeblock"><tr><td class="linenums"><pre><code>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</code></pre></td><td class="code highlight"><pre><code class="cpp"><span class="codeline" id="line1"><span class="cp">#include &lt;sstream&gt;</span></span>
<span class="codeline" id="line2"><span class="cp">#include &lt;string&gt;</span></span>
<span class="codeline" id="line3"></span>
<span class="codeline" id="line4"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span></span>
<span class="codeline" id="line5"><span class="p">{</span></span>
<span class="codeline" id="line6">	<span class="n">std</span><span class="o">::</span><span class="n">istringstream</span> <span class="n">stream</span><span class="p">{</span><span class="s">&quot;Chief Executive Officer</span><span class="se">\n</span><span class="s">&quot;</span></span>
<span class="codeline" id="line7">	                          <span class="s">&quot;John Smith</span><span class="se">\n</span><span class="s">&quot;</span></span>
<span class="codeline" id="line8">	                          <span class="s">&quot;32&quot;</span><span class="p">};</span></span>
<span class="codeline" id="line9"></span>
<span class="codeline" id="line10">	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">position</span><span class="p">;</span></span>
<span class="codeline" id="line11">	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">first_name</span><span class="p">;</span></span>
<span class="codeline" id="line12">	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">family_name</span><span class="p">;</span></span>
<span class="codeline" id="line13">	<span class="kt">int</span> <span class="n">age</span><span class="p">;</span></span>
<span class="codeline" id="line14"></span>
<span class="codeline" id="line15">	<span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">getline</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span> <span class="o">&amp;&amp;</span></span>
<span class="codeline" id="line16">	    <span class="n">stream</span> <span class="o">&gt;&gt;</span> <span class="n">first_name</span> <span class="o">&gt;&gt;</span> <span class="n">family_name</span> <span class="o">&gt;&gt;</span> <span class="n">age</span><span class="p">)</span> <span class="p">{</span></span>
<span class="codeline" id="line17">		<span class="c1">// Use values</span></span>
<span class="codeline" id="line18">	<span class="p">}</span></span>
<span class="codeline" id="line19"><span class="p">}</span></span></code></pre></td></tr></table>
						<p class="license">This sample is licensed under the <a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0 Public Domain Dedication</a>.</p>
					</div>
					<div class="column-2">
						<h2>Intent</h2>
						<p>Ensure that multiple stream reads are successful before using the
extracted values.</p>


						<h2>Description</h2>
						<p>We create a <a href="http://en.cppreference.com/w/cpp/io/basic_istringstream"><code>std::istringstream</code></a> as
the example input stream, which contains some values that we wish
to read (<a href="#line6" class="lineref" data-line="6" data-line-end="8">lines 6–8</a>). This stream could be replaced by any other
input stream, such as <a href="http://en.cppreference.com/w/cpp/io/cin"><code>std::cin</code></a> or a file stream.
We then create some objects on <a href="#line10" class="lineref" data-line="10" data-line-end="13">lines 10–13</a> into which we will read 
values from the stream.</p>

<p>In the condition of the <code>if</code> statement on <a href="#line15" class="lineref" data-line="15" data-line-end="18">lines 15–18</a>, we first perform
an unformatted extraction with
<a href="http://en.cppreference.com/w/cpp/string/basic_string/getline"><code>std::getline</code></a> <a href="#line15" class="lineref" data-line="15">line 15</a>
and then a series of formatted extractions <a href="#line16" class="lineref" data-line="16">line 16</a>. The <code>&amp;&amp;</code> operator
ensures that the condition is <code>true</code> only when all extractions
succeed. Short-circuiting also ensures that the second set of
extractions are only attempted if the previous extraction was
successful.</p>

<p>If you are reading values on multiple lines, consider <a href="/common-tasks/read-line-by-line.html">reading
from the stream line-by-line</a>
and then parsing each line.</p>

						<div class="subrow">
							<div class="column-1">
								<h2>Contributors</h2>
								<ul class="contributors">

									<li><a title="Joseph Mansfield" href="https://github.com/sftrabbit"><img src="https://avatars.githubusercontent.com/u/32490?v=3&size=36" alt="Joseph Mansfield"></a></li>

								</ul>
								<h2>Last Updated</h2>
								<p>07 April 2015</p>
								<h2>Source</h2>
								<p><a href="https://github.com/sftrabbit/CppSamples-Samples/tree/master/1-common-tasks/input-streams/validate-multiple-reads.cpp">Fork this sample on GitHub</a></p>
							</div>
							<div class="column-1">
								<h2>Share</h2>
								<p><div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div></p>
								<p><a href="https://twitter.com/share" class="twitter-share-button" data-via="sftrabbit" data-dnt="true">Tweet</a></p>
								<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
								<div class="g-plusone" data-size="medium"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="column-4">
						<div id="disqus_thread"></div>
						<script type="text/javascript">
var disqus_shortname = 'cppsamples';

(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
						</script>

						<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6789411983750873" data-ad-slot="5581833133" data-ad-format="auto"></ins>

					</div>
				</div>
			</section>

		</main>
		<footer class="container">
			<div class="row">
				<div class="column-2">
					<p>Feel like <b>contributing</b>? This website is generated from a git repository. If you have something to add or have noticed a mistake, please <a href="https://github.com/sftrabbit/CppSamples-Samples">fork the project on GitHub</a>.</p>
					<p><div class="fb-like" data-href="http://www.cppsamples.com/" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div></p>
					<p><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.cppsamples.com/" data-text="Modern and idiomatic C++ code from C++ Samples" data-via="sftrabbit" data-dnt="true">Tweet</a></p>
					<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
					<div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://www.cppsamples.com/"></div>
				</div>
				<div class="column-1 offset-1 about">
					<img src="http://josephmansfield.uk/images/logo.svg">
					<p>C++ Samples created by <a href="http://josephmansfield.uk/">Joseph Mansfield</a></p>
				</div>
			</div>
		</footer>
		<script>
adsbygoogle = window.adsbygoogle || [];
adsbygoogle.push({});

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17335804-5', 'auto');
ga('send', 'pageview');

window.fbAsyncInit = function() {
  FB.init({
    appId      : '676162015844286',
    xfbml      : true,
    version    : 'v2.3'
  });
};

(function(d, s, id){
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_US/sdk.js";
   fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
		</script>
	</body>
</html>
